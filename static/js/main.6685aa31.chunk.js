(this["webpackJsonptokyo-2020-medal-race"]=this["webpackJsonptokyo-2020-medal-race"]||[]).push([[0],{149:function(t,e,n){},15:function(t,e,n){t.exports={intro:"Intro_intro__NbtR0"}},152:function(t,e,n){},153:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(58),i=n.n(r),o=(n(149),n(0)),s=function(t){var e=t.user,n=t.repo;return Object(o.jsx)("div",{style:{marginTop:"0.5rem",marginLeft:"0.5rem"},children:Object(o.jsx)("iframe",{src:"https://ghbtns.com/github-btn.html?user=".concat(e,"&repo=").concat(n,"&type=star&count=false&size=large"),frameBorder:"0",scrolling:"0",width:"170",height:"30",title:"GitHub"})})},l=n(15),d=n.n(l),u=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:d.a.intro,children:"A fairer medal system"}),Object(o.jsx)("p",{className:d.a.intro,children:"When you look at Olympic's official medal count, it is easy to find that countries with a larger population tend to sit on the top of the chart. Although there are limits to the number of athletes each country can send to the Olympic games, larger countries do have a bigger pool to choose the best of their athletes. Obviously there should be a fairer way to count the medals."}),Object(o.jsx)("p",{className:d.a.intro,children:"So what if we count the medals considering the population of each country? Which country wins the most medals per capita? That is what these charts are about."})]})},j=n(3),m=n(2),h=n(23),b=n.n(h),x=function(t){var e=t.children;return Object(o.jsx)("li",{className:b.a.flexCardListItem,children:Object(o.jsx)("div",{className:b.a.flexCard,children:e})})},O=n(59),f=n.n(O),p=function(t){var e=t.min,n=t.max,a=t.selected,c=t.handleChange;return Object(o.jsxs)("div",{className:f.a.inputContainer,children:[Object(o.jsxs)("p",{children:["Include ",Number(a)===n?"all":"top"]}),Object(o.jsx)("input",{type:"number",min:e,max:n,step:"10",value:a,onChange:function(t){return c(t.target.value)}}),Object(o.jsx)("p",{children:" entities"})]})},v=n(24),_=n(6),g=n.n(_),y=function(t){var e=t.view,n=t.setView,c=[{name:"Medals Per Capita",view_name:"medals_per_million",className:"medals_per_million"===e?"".concat(g.a.active," ").concat(g.a.viewButton):g.a.viewButton},{name:"Plain Medal Count",view_name:"medals",className:"medals"===e?"".concat(g.a.active," ").concat(g.a.viewButton):g.a.viewButton}];return Object(o.jsxs)("div",{className:g.a.nav,children:["Sort by"," ",c.map((function(t){return Object(a.createElement)(k,Object(v.a)(Object(v.a)({setView:n},t),{},{key:t.view_name}))}))]})},k=function(t){var e=t.name,n=t.view_name,a=t.className,c=t.setView;return Object(o.jsx)("button",{onClick:function(t){t.preventDefault(),c(n)},type:"button",className:a,children:e})},S=n(4),w=n.n(S),C=function(t){var e=t.xScale,n=t.innerHeight,a=t.tickFormat,c=t.tickOffset,r=void 0===c?3:c,i=t.tickCount,s=void 0===i?6:i;return e.ticks(s).map((function(t){return Object(o.jsxs)("g",{className:w.a.tick,transform:"translate(".concat(e(t),", 0)"),children:[Object(o.jsx)("line",{y2:n}),Object(o.jsx)("text",{y:n+r,dy:"0.71em",style:{textAnchor:"middle"},children:a(t)})]},t)}))},N=function(t){var e=t.yScale,n=t.tickOffset,a=void 0===n?3:n;return e.domain().map((function(t){return Object(o.jsx)("g",{className:w.a.tick,transform:"translate(0,".concat(e(t)+e.bandwidth()/2,")"),children:Object(o.jsx)("text",{x:-a,style:{fontWeight:"bold",textAnchor:"end",dominantBaseline:"central"},children:t})},t)}))},M=function(t){t.view;var e=t.data,n=t.xScale,a=t.xValue,c=t.yScale,r=t.yValue,i=t.colorScale,s=t.tooltipFormat,l=t.onHover,d=t.onMove,u=t.hoveredValue,j=t.fadeOpacity,h=void 0===j?.2:j,b=t.tooltipOffset,x=void 0===b?10:b;return e.map((function(t,j){return Object(o.jsxs)("g",{className:w.a.marks,onMouseEnter:function(){return l(r(t))},onMouseLeave:function(){return l(null)},onPointerMove:function(e){l(r(t)),d(Object(m.h)(e))},opacity:u&&u!==r(t)?h:1,children:[Object(o.jsx)("rect",{x:0,y:c(r(t)),width:n(a(t)),height:c.bandwidth(),fill:i((e.length-j)/e.length)}),Object(o.jsx)("text",{className:w.a.tooltipStroke,x:n(a(t))+x,y:c(r(t))+c.bandwidth()/2,dominantBaseline:"central",children:s(a(t))}),Object(o.jsx)("text",{className:w.a.tooltip,x:n(a(t))+x,y:c(r(t))+c.bandwidth()/2,dominantBaseline:"central",children:s(a(t))})]},r(t))}))},L=function(t){var e=t.hoveredValue,n=t.data,a=t.points,c=t.tooltipOffset,r=n.find((function(t){return t.entity===e}));return Object(o.jsxs)("g",{children:[Object(o.jsxs)("text",{className:w.a.tooltipStroke,x:a[0]+c,y:a[1],dy:".42em",children:[Object(o.jsx)("tspan",{x:a[0]+c,children:"".concat(r.medals>1?"Medals":"Medal",": ").concat(r.medals.toLocaleString()," ")}),Object(o.jsx)("tspan",{x:a[0]+c,dy:"1.3em",children:"Population: ".concat(r.population.toLocaleString())})]}),Object(o.jsxs)("text",{className:w.a.tooltip,x:a[0]+c,y:a[1],dy:".42em",children:[Object(o.jsx)("tspan",{x:a[0]+c,children:"".concat(r.medals>1?"Medals":"Medal",": ").concat(r.medals.toLocaleString()," ")}),Object(o.jsx)("tspan",{x:a[0]+c,dy:"1.3em",children:"Population: ".concat(r.population.toLocaleString())})]})]})},B=window.innerWidth<1e3?window.innerWidth:1e3,V={top:5,right:50,bottom:45,left:160},I=function(t){return t.entity},P=function(t){return Object(m.d)("~r")(t)},F=function(t){var e=t.view,n=t.data,c=Object(a.useState)(null),r=Object(j.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(null),d=Object(j.a)(l,2),u=d[0],h=d[1],b=Object(a.useCallback)(s,[s]),x=Object(a.useCallback)(h,[h]),O=20*n.length+V.top+V.bottom,f=O-V.top-V.bottom,p=B-V.left-V.right,v=Object(a.useMemo)((function(){return function(t){return t[e]}}),[e]),_=Object(a.useMemo)((function(){return"medals"===e?Object(m.j)().domain([0,Object(m.f)(n,v)]).range([0,p]).nice():Object(m.k)().domain(Object(m.c)(n,v)).range([0,p]).nice()}),[e,n,v,p]),g=Object(a.useMemo)((function(){return Object(m.i)().domain(n.map((function(t){return I(t)}))).range([0,f]).paddingInner(.2)}),[n,f]),y=Object(a.useMemo)((function(){return Object(m.l)(m.e)}),[]),k="medals_per_million"===e?Object(m.d)(".2"):Object(m.d)("~r");return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("svg",{viewBox:"0 0 ".concat(B," ").concat(O),preserveAspectRatio:"xMinYMid",children:Object(o.jsxs)("g",{transform:"translate(".concat(V.left,", ").concat(V.top,")"),children:[Object(o.jsx)(C,{innerHeight:f,xScale:_,tickFormat:P,tickOffset:8,tickCount:B>480?3:2}),Object(o.jsx)(N,{yScale:g,tickOffset:8}),Object(o.jsx)(M,{view:e,data:n,margin:V,innerWidth:p,xScale:_,xValue:v,yScale:g,yValue:I,colorScale:y,tooltipFormat:k,onHover:b,onMove:x,hoveredValue:i,fadeOpacity:.3,tooltipOffset:10}),i&&u?Object(o.jsx)(L,{data:n,hoveredValue:i,points:u,tooltipOffset:10}):null]})})})},H=function(){var t=Object(a.useState)("medals_per_million"),e=Object(j.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(30),i=Object(j.a)(r,2),s=i[0],l=i[1],d=function(){var t=Object(a.useState)(null),e=Object(j.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){var t=!0;return Object(m.b)("https://raw.githubusercontent.com/edomt/tokyo2020/main/output/medals_per_million.csv",m.a).then((function(e){t&&c(e)})),function(){t=!1}}),[]),n}();if(!d)return Object(o.jsx)("pre",{children:'"Loading..."'});var u=d.sort((function(t,e){return e[n]-t[n]})).slice(0,s>0?s:10);return Object(o.jsxs)(x,{children:[Object(o.jsx)(A,{title:"2020 Summer Olympics ".concat("medals_per_million"===n?"medals per million people":"medals won")}),Object(o.jsxs)("pre",{children:["Last updated: ",u[0].last_updated.toLocaleDateString("ja")]}),Object(o.jsx)(p,{min:10,max:d.length,selected:s,handleChange:l}),Object(o.jsx)(y,{view:n,setView:c}),Object(o.jsx)(F,{view:n,data:u}),Object(o.jsx)(W,{})]})},A=function(t){var e=t.title;return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{style:{margin:0},children:e})})},W=function(){return Object(o.jsxs)("p",{className:"credit",children:["Credit: This chart is created based on Edouard Mathieu's"," ",Object(o.jsx)("a",{href:"https://twitter.com/redouad/status/1418976240954978309",children:"idea"})," ","and ",Object(o.jsx)("a",{href:"https://github.com/edomt/tokyo2020",children:"his project on GitHub"}),"."]})},R=n(60),E=n.n(R),T=function(t){var e=t.min,n=t.max,a=t.selected,c=t.handleChange;return Object(o.jsxs)("div",{className:E.a.inputContainer,children:[Object(o.jsx)("p",{children:"Include entities with at least "}),Object(o.jsx)("input",{type:"number",min:e,max:n,value:a,onChange:function(t){return c(t.target.value)}}),Object(o.jsx)("p",{children:" medals"})]})},J=n(25),Z=n.n(J),D=function(t){var e=t.children;return Object(o.jsx)("li",{className:Z.a.flexCardListItem,children:Object(o.jsx)("div",{className:Z.a.flexCard,children:e})})},G=n(7),z=n.n(G),Q=function(t){var e=t.xScale,n=t.innerHeight,a=t.tickFormat,c=t.tickOffset,r=void 0===c?3:c;return e.ticks().map((function(t){return Object(o.jsxs)("g",{className:z.a.tick,transform:"translate(".concat(e(t),", 0)"),children:[Object(o.jsx)("line",{y2:n}),Object(o.jsx)("text",{y:n+r,dy:"0.71em",style:{textAnchor:"middle"},children:a(t)})]},t)}))},X=function(t){var e=t.yScale,n=t.innerWidth,a=t.tickOffset,c=void 0===a?3:a;return e.ticks(2).map((function(t){return Object(o.jsxs)("g",{className:z.a.tick,transform:"translate(0,".concat(e(t),")"),children:[Object(o.jsx)("line",{x2:n}),Object(o.jsx)("text",{dy:".32em",x:c+n,style:{textAnchor:"start"},children:t})]},t)}))},Y=function(t){var e=t.xScale,n=t.xValue,a=t.yScale,c=t.yValue,r=t.data,i=t.tooltipFormat,s=t.colorScale,l=t.circleRadius,d=void 0===l?10:l,u=t.onHover,j=t.hoveredValue,h=t.fadeOpacity,b=void 0===h?.2:h;return r.map((function(t,l){return Object(o.jsxs)("g",{onMouseEnter:function(){return u(c(t))},onMouseLeave:function(){return u(null)},onPointerMove:function(){u(c(t))},children:[Object(o.jsx)("circle",{fill:s((r.length-l)/r.length),cx:e(n(t)),cy:a(c(t)),r:d,opacity:j&&j!==c(t)?b:.6,children:Object(o.jsx)("title",{children:"".concat(t.entity," has earned ").concat(i(n(t))," medals, resulting in ").concat(c(t)," medals per million people")})}),Object(o.jsx)("text",{x:e(n(t))>.9*e(Object(m.f)(r,n))?e(n(t))-d-3:e(n(t))+d+3,y:a(c(t)),dominantBaseline:"central",textAnchor:e(n(t))>.9*e(Object(m.f)(r,n))?"end":"start",opacity:j&&j!==c(t)?b:1,children:t.entity})]},"mark".concat(l))}))},q=window.innerWidth<1e3?window.innerWidth:1e3,U=q>480?.7*q:1*q,K=20,$=55,tt=U-K-60,et=q-$-50,nt=function(t){return t.medals},at=function(t){return Object(m.d)("~")(t)},ct=function(t){return t.medals_per_million},rt=function(){var t=Object(a.useState)(10),e=Object(j.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(null),i=Object(j.a)(r,2),s=i[0],l=i[1],d=Object(a.useCallback)(l,[l]),u=Object(a.useMemo)((function(){return Object(m.l)(m.e)}),[]),h=function(){var t=Object(a.useState)(null),e=Object(j.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){var t=!0;return Object(m.b)("https://raw.githubusercontent.com/edomt/tokyo2020/main/output/medals_per_million.csv",m.a).then((function(e){t&&c(e)})),function(){t=!1}}),[]),n}();if(!h)return Object(o.jsx)("pre",{children:'"Loading..."'});var b=h.filter((function(t){return t.medals>=n})),x=Object(m.j)().domain([0,Object(m.f)(b,nt)]).range([0,et]).nice(),O=Object(m.k)().domain([Object(m.f)(b,ct),Object(m.g)(b,ct)]).range([0,tt]);return Object(o.jsxs)(D,{children:[Object(o.jsx)(it,{title:"2020 Summer Olympics: medals per capita vs. plain medal count"}),Object(o.jsxs)("pre",{children:["Last updated: ",b[0].last_updated.toLocaleDateString("ja")]}),Object(o.jsx)(T,{min:1,max:20,selected:n,handleChange:c}),Object(o.jsx)("svg",{viewBox:"0 0 ".concat(q," ").concat(U),preserveAspectRatio:"xMinYMid",children:Object(o.jsxs)("g",{transform:"translate(".concat($,", ").concat(K,")"),children:[Object(o.jsx)(Q,{innerHeight:tt,xScale:x,tickFormat:at,tickOffset:7}),Object(o.jsx)(ot,{}),Object(o.jsx)(X,{innerWidth:et,yScale:O,tickOffset:7}),Object(o.jsx)(st,{}),Object(o.jsx)(Y,{xScale:x,xValue:nt,yScale:O,yValue:ct,data:b,tooltipFormat:at,colorScale:u,circleRadius:6,onHover:d,hoveredValue:s,fadeOpacity:.2})]})}),Object(o.jsx)(lt,{})]})},it=function(t){var e=t.title;return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{style:{margin:0},children:e})})},ot=function(){return Object(o.jsx)("text",{className:z.a.axisLabel,x:et/2,y:tt+50,textAnchor:"middle",children:"Total Medals"})},st=function(){return Object(o.jsx)("text",{className:z.a.axisLabel,textAnchor:"middle",transform:"translate(".concat(-20,", ").concat(tt/2,") rotate(-90)"),children:"Medals Per Million People"})},lt=function(){return Object(o.jsxs)("p",{className:"credit",children:["Credit: This chart is created based on Edouard Mathieu's"," ",Object(o.jsx)("a",{href:"https://twitter.com/redouad/status/1418976240954978309",children:"idea"})," ","and ",Object(o.jsx)("a",{href:"https://github.com/edomt/tokyo2020",children:"his project on GitHub"}),"."]})},dt=(n(152),function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(s,{user:"mgeorgetw",repo:"Tokyo2020MedalRace"}),Object(o.jsx)(u,{}),Object(o.jsx)(H,{}),Object(o.jsx)(rt,{})]})});i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(dt,{})}),document.getElementById("root"))},23:function(t,e,n){t.exports={flexCardListItem:"Card_flexCardListItem__1UgbI",flexCard:"Card_flexCard__aF9iL"}},25:function(t,e,n){t.exports={flexCardListItem:"Card_flexCardListItem__khSI4",flexCard:"Card_flexCard__1o6wJ"}},4:function(t,e,n){t.exports={axisLabel:"BarChart_axisLabel__3vnVy",marks:"BarChart_marks__2eNyt",tooltip:"BarChart_tooltip__3dfDM",tooltipStroke:"BarChart_tooltipStroke__3EqPW",tick:"BarChart_tick__G8viQ",legendLabel:"BarChart_legendLabel__9sZvi",legend:"BarChart_legend__2Julh"}},59:function(t,e,n){t.exports={inputContainer:"Input_inputContainer__2JRdm"}},6:function(t,e,n){t.exports={nav:"Nav_nav__2NhzP",viewButton:"Nav_viewButton__16msS",active:"Nav_active__1r6HR"}},60:function(t,e,n){t.exports={inputContainer:"Input_inputContainer__29_xR"}},7:function(t,e,n){t.exports={axisLabel:"ScatterPlot_axisLabel__1sZtS",marks:"ScatterPlot_marks__3XQOs",tick:"ScatterPlot_tick__3XZMt",tooltip:"ScatterPlot_tooltip__3bZZR",tooltipStroke:"ScatterPlot_tooltipStroke__23dOv"}}},[[153,1,2]]]);
//# sourceMappingURL=main.6685aa31.chunk.js.map