(this["webpackJsonptokyo-2020-medal-race"]=this["webpackJsonptokyo-2020-medal-race"]||[]).push([[0],{149:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(56),i=n.n(r),o=(n(149),n(0)),s=function(e){var t=e.user,n=e.repo;return Object(o.jsx)("div",{style:{marginTop:"0.5rem",marginLeft:"0.5rem"},children:Object(o.jsx)("iframe",{src:"https://ghbtns.com/github-btn.html?user=".concat(t,"&repo=").concat(n,"&type=star&count=false&size=large"),frameborder:"0",scrolling:"0",width:"170",height:"30",title:"GitHub"})})},l=n(3),d=n(2),u=n(21),j=n.n(u),m=function(e){var t=e.children;return Object(o.jsx)("li",{className:j.a.flexCardListItem,children:Object(o.jsx)("div",{className:j.a.flexCard,children:t})})},b=n(57),x=n.n(b),h=function(e){var t=e.min,n=e.max,a=e.selected,c=e.handleChange;return Object(o.jsxs)("div",{className:x.a.inputContainer,children:[Object(o.jsxs)("p",{children:["Include ",Number(a)===n?"all":"top"]}),Object(o.jsx)("input",{type:"number",min:t,max:n,step:"10",value:a,onChange:function(e){return c(e.target.value)}}),Object(o.jsx)("p",{children:" entities"})]})},O=n(22),f=n(58),p=n.n(f),v=function(e){var t=e.view,n=e.setView,c=[{name:"Medals Per Million",view_name:"mpm",className:"mpm"===t?"active view-button":"view-button"},{name:"Total Medals",view_name:"medals",className:"medals"===t?"active view-button":"view-button"}];return Object(o.jsx)("div",{className:p.a.nav,children:c.map((function(e){return Object(a.createElement)(g,Object(O.a)(Object(O.a)({setView:n},e),{},{key:e.view_name}))}))})},g=function(e){var t=e.name,n=e.view_name,a=e.className,c=e.setView;return Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),c(n)},type:"button",className:a,children:t})},_=n(4),y=n.n(_),k=function(e){var t=e.xScale,n=e.innerHeight,a=e.tickFormat,c=e.tickOffset,r=void 0===c?3:c,i=e.tickCount,s=void 0===i?6:i;return t.ticks(s).map((function(e){return Object(o.jsxs)("g",{className:y.a.tick,transform:"translate(".concat(t(e),", 0)"),children:[Object(o.jsx)("line",{y2:n}),Object(o.jsx)("text",{y:n+r,dy:"0.71em",style:{textAnchor:"middle"},children:a(e)})]},e)}))},w=function(e){var t=e.yScale,n=e.tickOffset,a=void 0===n?3:n;return t.domain().map((function(e){return Object(o.jsx)("g",{className:y.a.tick,transform:"translate(0,".concat(t(e)+t.bandwidth()/2,")"),children:Object(o.jsx)("text",{x:-a,style:{fontWeight:"bold",textAnchor:"end",dominantBaseline:"central"},children:e})},e)}))},S=function(e){var t=e.view,n=e.data,a=e.xScale,c=e.xValue,r=e.yScale,i=e.yValue,s=e.colorScale,l=e.tooltipFormat,u=e.onHover,j=e.onMove,m=e.hoveredValue,b=e.fadeOpacity,x=void 0===b?.2:b,h=e.labelOffset,O=void 0===h?10:h;e.tooltipOffset;return n.map((function(e,b){return Object(o.jsxs)("g",{className:y.a.marks,onMouseEnter:function(){return u(i(e))},onMouseLeave:function(){return u(null)},onPointerMove:function(t){u(i(e)),j(Object(d.g)(t))},opacity:m&&m!==i(e)?x:1,children:[Object(o.jsx)("rect",{x:0,y:r(i(e)),width:a(c(e)),height:r.bandwidth(),fill:"mpm"===t?s((n.length-b)/n.length):"orange"}),Object(o.jsx)("text",{className:y.a.tooltipStroke,x:a(c(e))+O,y:r(i(e))+r.bandwidth()/2,dominantBaseline:"central",children:l(c(e))}),Object(o.jsx)("text",{className:y.a.tooltip,x:a(c(e))+O,y:r(i(e))+r.bandwidth()/2,dominantBaseline:"central",children:l(c(e))})]},i(e))}))},C=function(e){var t=e.hoveredValue,n=e.data,a=e.points,c=e.labelOffset,r=n.find((function(e){return e.entity===t}));return console.log(a),Object(o.jsxs)("g",{children:[Object(o.jsxs)("text",{className:y.a.tooltipStroke,x:a[0]+c,y:a[1],dy:".42em",children:[Object(o.jsx)("tspan",{x:a[0]+c,children:"".concat(r.medals>1?"Medals":"Medal",": ").concat(r.medals.toLocaleString()," ")}),Object(o.jsx)("tspan",{x:a[0]+c,dy:"1.3em",children:"Population: ".concat(r.population.toLocaleString())})]}),Object(o.jsxs)("text",{className:y.a.tooltip,x:a[0]+c,y:a[1],dy:".42em",children:[Object(o.jsx)("tspan",{x:a[0]+c,children:"".concat(r.medals>1?"Medals":"Medal",": ").concat(r.medals.toLocaleString()," ")}),Object(o.jsx)("tspan",{x:a[0]+c,dy:"1.3em",children:"Population: ".concat(r.population.toLocaleString())})]})]})},M=window.innerWidth<1e3?window.innerWidth:1e3,N={top:5,right:50,bottom:45,left:160},L=function(e){return e.entity},V=function(e){return Object(d.d)("~")(e)},B=Object(d.d)(".2"),I=function(e){var t=e.view,n=e.data,c=e.rows,r=Object(a.useState)(null),i=Object(l.a)(r,2),s=i[0],u=i[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],x=m[1],h=Object(a.useCallback)(u,[u]),O=Object(a.useCallback)(x,[x]),f=20*c+N.top+N.bottom,p=f-N.top-N.bottom,v=M-N.left-N.right,g=Object(a.useMemo)((function(){return"mpm"===t?function(e){return e.medals_per_million}:function(e){return e.medals}}),[t]),_=Object(a.useMemo)((function(){return"mpm"===t?Object(d.j)().domain(Object(d.c)(n,g)).range([0,v]).nice():Object(d.i)().domain([0,Object(d.f)(n,g)]).range([0,v]).nice()}),[t,n,g,v]),y=Object(a.useMemo)((function(){return Object(d.h)().domain(n.map((function(e){return L(e)}))).range([0,p]).paddingInner(.2)}),[n,p]),I=Object(a.useMemo)((function(){return Object(d.k)(d.e)}),[]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("svg",{viewBox:"0 0 ".concat(M," ").concat(f),preserveAspectRatio:"xMinYMid",children:Object(o.jsxs)("g",{transform:"translate(".concat(N.left,", ").concat(N.top,")"),children:[Object(o.jsx)(k,{innerHeight:p,xScale:_,tickFormat:V,tickOffset:8,tickCount:M>480?3:2}),Object(o.jsx)(w,{yScale:y,tickOffset:8}),Object(o.jsx)(S,{view:t,data:n,margin:N,innerWidth:v,xScale:_,xValue:g,yScale:y,yValue:L,colorScale:I,tooltipFormat:B,onHover:h,onMove:O,hoveredValue:s,fadeOpacity:.3}),s&&b?Object(o.jsx)(C,{data:n,hoveredValue:s,points:b,labelOffset:10}):null]})})})},P=function(e){var t=e.title;return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{style:{margin:0},children:t})})},F=function(){return Object(o.jsxs)("p",{className:"credit",children:["Credit: This chart is created based on Edouard Mathieu's"," ",Object(o.jsx)("a",{href:"https://twitter.com/redouad/status/1418976240954978309",children:"idea"})," ","and ",Object(o.jsx)("a",{href:"https://github.com/edomt/tokyo2020",children:"his project on GitHub"}),"."]})},H=function(){var e=Object(a.useState)("mpm"),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(30),i=Object(l.a)(r,2),s=i[0],u=i[1],j=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(d.b)("https://raw.githubusercontent.com/edomt/tokyo2020/main/output/medals_per_million.csv",d.a).then((function(t){e&&c(t)})),function(){e=!1}}),[]),n}();if(!j)return Object(o.jsx)("pre",{children:'"Loading..."'});var b=j.slice(0,s>0?s:1);return Object(o.jsxs)(m,{children:[Object(o.jsx)(P,{title:"2020 Summer Olympics ".concat("mpm"===n?"medals per million people":"total medals won")}),Object(o.jsxs)("pre",{children:["Last updated: ",b[0].last_updated.toLocaleDateString("ja")]}),Object(o.jsx)(h,{min:10,max:j.length,selected:s,handleChange:u}),Object(o.jsx)(v,{view:n,setView:c}),Object(o.jsx)(I,{view:n,data:b,rows:s}),Object(o.jsx)(F,{})]})},W=n(59),A=n.n(W),E=function(e){var t=e.min,n=e.max,a=e.selected,c=e.handleChange;return Object(o.jsxs)("div",{className:A.a.inputContainer,children:[Object(o.jsx)("p",{children:"Include entities with at least "}),Object(o.jsx)("input",{type:"number",min:t,max:n,value:a,onChange:function(e){return c(e.target.value)}}),Object(o.jsx)("p",{children:" medals"})]})},R=n(23),T=n.n(R),J=function(e){var t=e.children;return Object(o.jsx)("li",{className:T.a.flexCardListItem,children:Object(o.jsx)("div",{className:T.a.flexCard,children:t})})},Z=n(5),D=n.n(Z),G=function(e){var t=e.xScale,n=e.innerHeight,a=e.tickFormat,c=e.tickOffset,r=void 0===c?3:c;return t.ticks().map((function(e){return Object(o.jsxs)("g",{className:D.a.tick,transform:"translate(".concat(t(e),", 0)"),children:[Object(o.jsx)("line",{y2:n}),Object(o.jsx)("text",{y:n+r,dy:"0.71em",style:{textAnchor:"middle"},children:a(e)})]},e)}))},z=function(e){var t=e.yScale,n=e.innerWidth,a=e.tickOffset,c=void 0===a?3:a;return t.ticks(2).map((function(e){return Object(o.jsxs)("g",{className:D.a.tick,transform:"translate(0,".concat(t(e),")"),children:[Object(o.jsx)("line",{x2:n}),Object(o.jsx)("text",{dy:".32em",x:-c,style:{textAnchor:"end"},children:e})]},e)}))},Q=function(e){var t=e.xScale,n=e.xValue,a=e.yScale,c=e.yValue,r=e.data,i=e.tooltipFormat,s=e.circleRadius,l=void 0===s?10:s;return r.map((function(e,r){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("circle",{className:D.a.marks,cx:t(n(e)),cy:a(c(e)),r:l,children:Object(o.jsx)("title",{children:"".concat(e.entity," has earned ").concat(i(n(e))," medals, resulting in ").concat(c(e)," medals per million people")})},r),Object(o.jsx)("text",{x:t(n(e))+l+3,y:a(c(e)),dominantBaseline:"central",children:e.entity})]})}))},X=function(e){var t=e.title;return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{style:{margin:0},children:t})})},Y=function(){return Object(o.jsxs)("p",{className:"credit",children:["Credit: This chart is created based on Edouard Mathieu's"," ",Object(o.jsx)("a",{href:"https://twitter.com/redouad/status/1418976240954978309",children:"idea"})," ","and ",Object(o.jsx)("a",{href:"https://github.com/edomt/tokyo2020",children:"his project on GitHub"}),"."]})},q=window.innerWidth<1e3?window.innerWidth:1e3,U=q>480?.7*q:1*q,K=20,$=75,ee=U-K-60,te=q-$-100,ne=function(e){return e.medals},ae=function(e){return Object(d.d)("~")(e)},ce=function(e){return e.medals_per_million},re=function(){var e=Object(a.useState)(5),t=Object(l.a)(e,2),n=t[0],c=t[1],r=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(d.b)("https://raw.githubusercontent.com/edomt/tokyo2020/main/output/medals_per_million.csv",d.a).then((function(t){e&&c(t)})),function(){e=!1}}),[]),n}();if(!r)return Object(o.jsx)("pre",{children:'"Loading..."'});var i=r.filter((function(e){return e.medals>=n})),s=Object(d.i)().domain([0,Object(d.f)(i,ne)]).range([0,te]).nice(),u=Object(d.j)().domain([Object(d.f)(i,ce),.01]).range([0,ee]);return Object(o.jsxs)(J,{children:[Object(o.jsx)(X,{title:"2020 Summer Olympics medals won"}),Object(o.jsxs)("pre",{children:["Last updated: ",i[0].last_updated.toLocaleDateString("ja")]}),Object(o.jsx)(E,{min:1,max:10,selected:n,handleChange:c}),Object(o.jsx)("svg",{viewBox:"0 0 ".concat(q," ").concat(U),preserveAspectRatio:"xMinYMid",children:Object(o.jsxs)("g",{transform:"translate(".concat($,", ").concat(K,")"),children:[Object(o.jsx)(G,{innerHeight:ee,xScale:s,tickFormat:ae,tickOffset:7}),Object(o.jsx)("text",{className:D.a.axisLabel,x:te/2,y:ee+50,textAnchor:"middle",children:"Total Medals"}),Object(o.jsx)(z,{innerWidth:te,yScale:u,tickOffset:7}),Object(o.jsx)("text",{className:D.a.axisLabel,textAnchor:"middle",transform:"translate(".concat(-50,", ").concat(ee/2,") rotate(-90)"),children:"Medals Per Million People"}),Object(o.jsx)(Q,{xScale:s,xValue:ne,yScale:u,yValue:ce,data:i,tooltipFormat:ae,circleRadius:6})]})}),Object(o.jsx)(Y,{})]})},ie=(n(152),function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(s,{user:"mgeorgetw",repo:"Tokyo2020MedalRace"}),Object(o.jsx)(H,{}),Object(o.jsx)(re,{})]})});i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(ie,{})}),document.getElementById("root"))},21:function(e,t,n){e.exports={flexCardListItem:"Card_flexCardListItem__1UgbI",flexCard:"Card_flexCard__aF9iL"}},23:function(e,t,n){e.exports={flexCardListItem:"Card_flexCardListItem__khSI4",flexCard:"Card_flexCard__1o6wJ"}},4:function(e,t,n){e.exports={axisLabel:"BarChart_axisLabel__3vnVy",marks:"BarChart_marks__2eNyt",tooltip:"BarChart_tooltip__3dfDM",tooltipStroke:"BarChart_tooltipStroke__3EqPW",tick:"BarChart_tick__G8viQ",legendLabel:"BarChart_legendLabel__9sZvi",legend:"BarChart_legend__2Julh"}},5:function(e,t,n){e.exports={axisLabel:"ScatterPlot_axisLabel__1sZtS",marks:"ScatterPlot_marks__3XQOs",tick:"ScatterPlot_tick__3XZMt",tooltip:"ScatterPlot_tooltip__3bZZR",tooltipStroke:"ScatterPlot_tooltipStroke__23dOv"}},57:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__2JRdm"}},58:function(e,t,n){e.exports={nav:"Nav_nav__2NhzP"}},59:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__29_xR"}}},[[153,1,2]]]);
//# sourceMappingURL=main.e284d9a8.chunk.js.map